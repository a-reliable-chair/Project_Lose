[
    {
        "name": "Door1",
        "trigger": "<yellow>Door</yellow>",
        "level_nid": "3",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "sound;Unlock",
            "show_layer;BottomDoor",
            "if;unit.nid == 'Carlin' and {v:CarlinVisited} == 1",
            "    add_portrait;{unit};Left",
            "    music;Betimed Blossoming",
            "    s;Carlin;What the heck...?{w} Something awful happened here, I can feel it, but...|What could have left this lingering magic, this...{w} choking darkness...?|It must have been so terrible...{w} I-I think...{w} I'm too afraid...{w}{clear}I can feel it...{w} it...{w} wants to be let in.{w} But I can't...{w} I shouldn't!{w}{clear}Except...{w} it might be the only way to get everyone out of this alive.{w}{clear}Aw heck, gramps...{w} What would you say, or do, were you in my place?{w}{clear}I...{w} Darn it, I have to try!|Even if I can never get rid of it, if it saves lives...{w} I accept.",
            "    remove_portrait;Carlin",
            "    give_item;{unit};Duskfall",
            "    give_exp;{unit};40",
            "    remove_skill;Carlin;RiskyBusiness",
            "    give_skill;Carlin;Overload",
            "    inc_game_var;CarlinUpgraded;1",
            "elif;unit.nid == 'Thrall'",
            "    add_portrait;{unit};Left",
            "    s;{unit};...",
            "    remove_portrait;{unit}",
            "    give_item;Quinley;Duskfall",
            "else",
            "    add_portrait;{unit};Left",
            "    speak;{unit};Huh?{w} What's this dusty old tome doing here?",
            "    remove_portrait;{unit}",
            "    give_item;{unit};Duskfall",
            "    give_exp;{unit};40",
            "end",
            "",
            "",
            "",
            "",
            "if;not has_achievement('23')",
            "    update_achievement;23;Where'd You Get That Key?!;Opened the door next to Corridon's in Ch4",
            "    complete_achievement;23;1;banner",
            "end",
            "",
            "has_traded;{unit}",
            ""
        ]
    }
]