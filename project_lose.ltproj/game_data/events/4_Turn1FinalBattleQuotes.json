[
    {
        "name": "Turn1FinalBattleQuotes",
        "trigger": "phase_change",
        "level_nid": "4",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "#Final battle quotes!",
            "if; u('Alpin').position",
            "    flicker_cursor;Alpin",
            "    add_portrait;Alpin;Right",
            "    s;Alpin;I'm here!",
            "    remove_portrait;Alpin",
            "    inc_level_var;TraineeDeployed;1",
            "    if;'{v:ReverseRecruitment}' == 'Yes'",
            "        inc_level_var;GotohDeployed;1",
            "    end",
            "end",
            "if; u('Carlin').position",
            "    flicker_cursor;Carlin",
            "    add_portrait;Carlin;Right",
            "    s;Carlin;I'm here!",
            "    remove_portrait;Carlin",
            "    inc_level_var;TraineeDeployed;1",
            "end",
            "if; u('Shayla').position",
            "    flicker_cursor;Shayla",
            "    add_portrait;Shayla;Right",
            "    s;Shayla;I'm here!",
            "    remove_portrait;Shayla",
            "    inc_level_var;TraineeDeployed;1",
            "end",
            "if; u('Raelin').position",
            "    flicker_cursor;Raelin",
            "    add_portrait;Raelin;Right",
            "    s;Raelin;I'm here!",
            "    remove_portrait;Raelin",
            "    inc_level_var;TraineeDeployed;1",
            "end",
            "if; u('Elwynn').position",
            "    flicker_cursor;Elwynn",
            "    add_portrait;Elwynn;Right",
            "    s;Elwynn;I'm here!",
            "    remove_portrait;Elwynn",
            "end",
            "if; u('Quinley').position",
            "    flicker_cursor;Quinley",
            "    add_portrait;Quinley;Right",
            "    s;Quinley;I'm here!",
            "    remove_portrait;Quinley",
            "end",
            "if; u('Saraid').position",
            "    flicker_cursor;Saraid",
            "    add_portrait;Saraid;Right",
            "    s;Saraid;I'm here!",
            "    remove_portrait;Saraid",
            "end",
            "if; u('Elspeth').position",
            "    flicker_cursor;Elspeth",
            "    add_portrait;Elspeth;Right",
            "    s;Elspeth;I'm here!",
            "    remove_portrait;Elspeth",
            "end",
            "if; u('Lamonte').position",
            "    flicker_cursor;Lamonte",
            "    add_portrait;Lamonte;Right",
            "    s;Lamonte;I'm here!",
            "    remove_portrait;Lamonte",
            "end",
            "if; u('Garvey').position",
            "    flicker_cursor;Garvey",
            "    add_portrait;Garvey;Right",
            "    s;Garvey;I'm here!",
            "    remove_portrait;Garvey",
            "end",
            "if; u('Ailsa').position",
            "    flicker_cursor;Ailsa",
            "    add_portrait;Ailsa;Right",
            "    s;Ailsa;I'm here!",
            "    remove_portrait;Ailsa",
            "end",
            "if; u('Orla').position",
            "    flicker_cursor;Orla",
            "    add_portrait;Orla;Right",
            "    s;Orla;I'm here!",
            "    remove_portrait;Orla",
            "end",
            "if; u('Corridon').position",
            "    flicker_cursor;Corridon",
            "    add_portrait;Corridon;Right",
            "    s;Corridon;I'm here!",
            "    remove_portrait;Corridon",
            "end",
            "if; u('Laisren').position",
            "    flicker_cursor;Laisren",
            "    add_portrait;Laisren;Right",
            "    s;Laisren;I'm here!",
            "    remove_portrait;Laisren",
            "    if;'{v:ReverseRecruitment}' == 'No'",
            "        inc_level_var;GotohDeployed;1",
            "    end",
            "if; u('Davenport').position and game.get_unit('Davenport').team == 'player'",
            "    flicker_cursor;Davenport",
            "    add_portrait;Davenport;Right",
            "    s;Davenport;I'm here!",
            "    remove_portrait;Davenport",
            "end",
            "end"
        ]
    }
]