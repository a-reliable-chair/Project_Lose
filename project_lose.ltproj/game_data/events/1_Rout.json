[
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 1 and game.check_alive('Brassfield')",
            "    flicker_cursor;Brassfield",
            "    add_portrait;Brassfield;Right",
            "    speak;Brassfield;My squad's dead. I'm out.",
            "    remove_portrait;Brassfield",
            "    move_unit;Brassfield;16, 17;normal;push",
            "    remove_unit;Brassfield;immediate;south",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "elif;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 0 and game.check_dead('Brassfield')",
            "    flicker_cursor;Alpin",
            "    add_portrait;Alpin;Left",
            "    speak;Alpin;That's the last of 'em! Let's go inside!",
            "    remove_portrait;Alpin",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "end",
            "if;not has_achievement('16') and {v:BrokenBarrel} == 0",
            "    update_achievement;16;Insurance Wouldn't Cover it!;Didn't let a crate break in Ch2",
            "    complete_achievement;16;1;banner",
            "    inc_game_var;AchievementCount;1",
            "end",
            "if;not has_achievement('17') and {v:LeodDead} == 0",
            "    update_achievement;17;It's The Right Thing To Do;Kept Leod alive in Ch2",
            "    complete_achievement;17;1;banner",
            "    inc_game_var;AchievementCount;1",
            "end",
            "if;not has_achievement('18') and {v:LeodDead} == 1",
            "    update_achievement;18;Meh, Never Liked Him Anyway;Let Leod die in Ch2",
            "    complete_achievement;18;1;banner",
            "    inc_game_var;AchievementCount;1",
            "end"
        ]
    }
]