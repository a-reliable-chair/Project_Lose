[
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 2 and game.check_alive('Brassfield') and game.check_alive('Leod') and game.get_unit('Brassfield').team == 'enemy'",
            "    flicker_cursor;Brassfield",
            "    add_portrait;Brassfield;Right",
            "    speak;Brassfield;My squad's dead. I'm out.",
            "    remove_portrait;Brassfield",
            "    move_unit;Brassfield;16, 17;normal;push",
            "    remove_unit;Brassfield;immediate;south",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "elif;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 1 and game.check_alive('Brassfield') and game.get_unit('Brassfield').team == 'enemy'",
            "    flicker_cursor;Brassfield",
            "    add_portrait;Brassfield;Right",
            "    speak;Brassfield;My squad's dead. I'm out.",
            "    remove_portrait;Brassfield",
            "    move_unit;Brassfield;16, 17;normal;push",
            "    remove_unit;Brassfield;immediate;south",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "elif;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 1 and game.check_alive('Leod')",
            "    flicker_cursor;Alpin",
            "    add_portrait;Alpin;Left",
            "    speak;Alpin;That's the last of 'em! Let's go inside!",
            "    remove_portrait;Alpin",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "elif;{v:RoutEnemies} == 0 and len(game.get_enemy_units()) == 0",
            "    flicker_cursor;Alpin",
            "    add_portrait;Alpin;Left",
            "    speak;Alpin;That's the last of 'em! Let's go inside!",
            "    remove_portrait;Alpin",
            "    inc_level_var;RoutEnemies;1",
            "    win_game",
            "end"
        ]
    }
]