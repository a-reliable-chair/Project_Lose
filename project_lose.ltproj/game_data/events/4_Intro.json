[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_talk;Elspeth;Brassfield",
            "add_weather;rain",
            "move_cursor;21, 0",
            "",
            "level_var;ShallcrossCharge;0",
            "level_var;ShallcrossDead;0",
            "level_var;KeevaDead;0",
            "level_var;ShallcrossAlpin;0",
            "level_var;ShallcrossCarlin;0",
            "level_var;ShallcrossShayla;0",
            "level_var;ShallcrossRaelin;0",
            "level_var;ShallcrossElwynn;0",
            "level_var;ShallcrossSaraid;0",
            "level_var;ShallcrossQuinley;0",
            "level_var;ShallcrossElspeth;0",
            "level_var;ShallcrossLamonte;0",
            "level_var;ShallcrossGarvey;0",
            "level_var;ShallcrossAilsa;0",
            "level_var;ShallcrossOrla;0",
            "level_var;ShallcrossCorridon;0",
            "level_var;ShallcrossLaisren;0",
            "level_var;ShallcrossBrassfield;0",
            "level_var;CawthorneAlpin;0",
            "level_var;CawthorneCarlin;0",
            "level_var;CawthorneShayla;0",
            "level_var;CawthorneRaelin;0",
            "level_var;CawthorneElwynn;0",
            "level_var;CawthorneSaraid;0",
            "level_var;CawthorneQuinley;0",
            "level_var;CawthorneElspeth;0",
            "level_var;CawthorneLamonte;0",
            "level_var;CawthorneGarvey;0",
            "level_var;CawthorneAilsa;0",
            "level_var;CawthorneOrla;0",
            "level_var;CawthorneCorridon;0",
            "level_var;CawthorneLaisren;0",
            "level_var;CawthorneBrassfield;0",
            "level_var;Ch5Outro;0",
            "",
            "if;'{v:ReverseRecruitment}' == 'Yes'",
            "    add_unit;Garvey;21, 0;fade;stack;north",
            "    add_unit;Lamonte;20, 0;fade;stack;north",
            "    add_unit;Elspeth;19, 0;fade;stack;north",
            "    add_unit;Elwynn;18, 0;fade;stack;north",
            "    add_unit;Shayla;17, 0;fade;stack;north",
            "    add_unit;Raelin;18, 0;fade;stack;north",
            "    add_unit;Carlin;19, 0;fade;stack;north",
            "    move_unit;Garvey;16, 1;normal;push;no_block;no_follow",
            "    move_unit;Lamonte;17, 2;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;13, 2;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;16, 3;normal;push;no_block;no_follow",
            "    move_unit;Shayla;14, 3;normal;push;no_block;no_follow",
            "    move_unit;Raelin;15, 2;normal;push;no_block;no_follow",
            "    move_unit;Carlin;18, 3;normal;push;no_follow",
            "    wait;500",
            "    ",
            "    multi_add_portrait;Raelin;MidRight;Elwynn;FarRight;Elspeth;FarLeft;Shayla;MidLeft",
            "    # It's raining, party gets to the beach. Raelin points out her house and Shayla's but the party is pressed for time and skip them.",
            "    speak;Raelin;filler",
            "    speak;Elspeth;filler",
            "    multi_remove_portrait;Raelin;Elwynn;Elspeth;Shayla",
            "    wait;500",
            "    ",
            "    move_unit;Garvey;6, 8;normal;push;no_block;no_follow",
            "    move_unit;Lamonte;5, 7;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;6, 10;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;7, 9;normal;push;no_block;no_follow",
            "    move_unit;Shayla;4, 10;normal;push;no_block;no_follow",
            "    move_unit;Raelin;5, 9;normal;push;no_block;no_follow",
            "    move_unit;Carlin;7, 7;normal;push",
            "    wait;500",
            "    ",
            "    add_portrait;Carlin;Right",
            "    # The party gets to the town entrance and are met by Shallcross (Superboss) who blocks the path.",
            "    speak;Carlin;filler",
            "    remove_portrait;Carlin",
            "    ",
            "    flicker_cursor;0, 8",
            "    add_unit;Shallcross;0, 8;fade;stack;west",
            "    add_unit;ShallcrossSoldier1;0, 8;fade;stack;west",
            "    add_unit;ShallcrossSoldier2;0, 9;fade;stack;west",
            "    move_unit;Shallcross;2, 8;normal;no_block;no_follow",
            "    move_unit;ShallcrossSoldier1;1, 8;normal;no_block;no_follow",
            "    move_unit;ShallcrossSoldier2;2, 9;normal;no_follow",
            "    wait;500",
            "    ",
            "    add_portrait;Shallcross;Left",
            "    # Shallcross tells them they can't leave",
            "    speak;Shallcross;filler",
            "    remove_portrait;Shallcross",
            "    wait;250",
            "    ",
            "    move_cursor;Carlin",
            "    multi_add_portrait;Shayla;MidRight;Carlin;FarRight",
            "    # Party decides to try another exit and runs off back towards town",
            "    speak;Carlin;[Filler]",
            "    speak;Shayla;[Filler]",
            "    multi_remove_portrait;Shayla;Carlin",
            "    wait;250",
            "    ",
            "    move_unit;Garvey;14, 3;normal;push;no_block;no_follow",
            "    move_unit;Lamonte;13, 2;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;12, 3;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;12, 4;normal;push;no_block;no_follow",
            "    move_unit;Shayla;11, 2;normal;push;no_block;no_follow",
            "    move_unit;Raelin;15, 2;normal;push;no_block;no_follow",
            "    move_unit;Carlin;10, 4;normal;push",
            "    ",
            "    add_portrait;Raelin;Left",
            "    #Party hears horse galloping and stalls.",
            "    speak;Raelin;filler",
            "    remove_portrait;Raelin",
            "    wait;250",
            "    ",
            "    move_cursor;21, 0",
            "    flicker_cursor;21, 0",
            "    add_unit;Alpin;21, 0;fade;push;north",
            "    move_unit;Alpin;16, 3;normal",
            "    change_team;Alpin;player",
            "    wait;250",
            "    ",
            "    multi_add_portrait;Lamonte;FarLeft;Raelin;MidLeft;Alpin;FarRight",
            "    # Alpin shows up and joins the party!",
            "    speak;Raelin;Alpin!",
            "    speak;Alpin;[filler]",
            "    speak;Lamonte;Fight our way back?",
            "    speak;Alpin;Impossible!",
            "    multi_remove_portrait;Lamonte;Raelin;Elwynn;Alpin",
            "    ",
            "    move_cursor;21, 0",
            "    flicker_cursor;21, 0",
            "    add_unit;Cawthorne;21, 0;fade;push;north",
            "    move_unit;Cawthorne;17, 1;normal;push",
            "    multi_add_portrait;Cawthorne;Right;Alpin;Left",
            "    # Cawthorne meets the party, they're sandwiched between him and Shallcross.",
            "    speak;Cawthorne;[Filler]",
            "    speak;Alpin;filler",
            "    multi_remove_portrait;Cawthorne;Alpin",
            "    wait;250",
            "    ",
            "    move_unit;Garvey;8, 10;normal;push;no_block;no_follow",
            "    move_unit;Lamonte;9, 9;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;14, 9;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;10, 10;normal;push;no_block;no_follow",
            "    move_unit;Shayla;15, 8;normal;push;no_block;no_follow",
            "    move_unit;Raelin;8, 8;normal;push;no_block;no_follow",
            "    move_unit;Carlin;13, 10;normal;push;no_block;no_follow",
            "    move_unit;Cawthorne;20, 0;normal;no_block;no_follow",
            "    move_unit;Alpin;13, 8;normal;push",
            "    wait;250",
            "    ",
            "else",
            "    give_skill;Laisren;AspiringLeader;no_banner",
            "    add_unit;Saraid;21, 0;fade;stack;north",
            "    add_unit;Quinley;20, 0;fade;stack;north",
            "    add_unit;Elwynn;19, 0;fade;stack;north",
            "    add_unit;Elspeth;18, 0;fade;stack;north",
            "    add_unit;Orla;17, 0;fade;stack;north",
            "    add_unit;Ailsa;18, 0;fade;stack;north",
            "    add_unit;Corridon;19, 0;fade;stack;north",
            "    move_unit;Saraid;16, 1;normal;push;no_block;no_follow",
            "    move_unit;Quinley;17, 2;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;13, 2;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;16, 3;normal;push;no_block;no_follow",
            "    move_unit;Orla;14, 3;normal;push;no_block;no_follow",
            "    move_unit;Ailsa;15, 2;normal;push;no_block;no_follow",
            "    move_unit;Corridon;18, 3;normal;push;no_follow",
            "    wait;500",
            "    ",
            "    multi_add_portrait;Ailsa;MidRight;Elspeth;FarRight;Elwynn;FarLeft;Orla;MidLeft",
            "    # It's raining, party gets to the beach. Ailsa points out her house and Orla's but the party is pressed for time and skip them.",
            "    speak;Ailsa;filler",
            "    speak;Elwynn;filler",
            "    multi_remove_portrait;Ailsa;Elspeth;Elwynn;Orla",
            "    wait;500",
            "    ",
            "    move_unit;Saraid;6, 8;normal;push;no_block;no_follow",
            "    move_unit;Quinley;5, 7;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;6, 10;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;7, 9;normal;push;no_block;no_follow",
            "    move_unit;Orla;4, 10;normal;push;no_block;no_follow",
            "    move_unit;Ailsa;5, 9;normal;push;no_block;no_follow",
            "    move_unit;Corridon;7, 7;normal;push",
            "    wait;500",
            "    ",
            "    add_portrait;Corridon;Right",
            "    # The party gets to the town entrance and are met by Shallcross (Superboss) who blocks the path.",
            "    speak;Corridon;filler",
            "    remove_portrait;Corridon",
            "    ",
            "    flicker_cursor;0, 8",
            "    add_unit;Shallcross;0, 8;fade;stack;west",
            "    add_unit;ShallcrossSoldier1;0, 8;fade;stack;west",
            "    add_unit;ShallcrossSoldier2;0, 9;fade;stack;west",
            "    move_unit;Shallcross;2, 8;normal;no_block;no_follow",
            "    move_unit;ShallcrossSoldier1;1, 8;normal;no_block;no_follow",
            "    move_unit;ShallcrossSoldier2;2, 9;normal;no_follow",
            "    wait;500",
            "    ",
            "    add_portrait;Shallcross;Left",
            "    # Shallcross tells them they can't leave",
            "    speak;Shallcross;filler",
            "    remove_portrait;Shallcross",
            "    wait;250",
            "    ",
            "    move_cursor;Corridon",
            "    multi_add_portrait;Orla;MidRight;Corridon;FarRight",
            "    # Party decides to try another exit and runs off back towards town",
            "    speak;Corridon;[Filler]",
            "    speak;Orla;[Filler]",
            "    multi_remove_portrait;Orla;Corridon",
            "    wait;250",
            "    ",
            "    move_unit;Saraid;14, 3;normal;push;no_block;no_follow",
            "    move_unit;Quinley;13, 2;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;12, 3;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;12, 4;normal;push;no_block;no_follow",
            "    move_unit;Orla;11, 2;normal;push;no_block;no_follow",
            "    move_unit;Ailsa;15, 2;normal;push;no_block;no_follow",
            "    move_unit;Corridon;10, 4;normal;push",
            "    ",
            "    add_portrait;Ailsa;Left",
            "    #Party hears horse galloping and stalls.",
            "    speak;Ailsa;filler",
            "    remove_portrait;Ailsa",
            "    wait;250",
            "    ",
            "    move_cursor;21, 0",
            "    flicker_cursor;21, 0",
            "    add_unit;Laisren;21, 0;fade;push;north",
            "    move_unit;Laisren;16, 3;normal",
            "    change_team;Laisren;player",
            "    wait;250",
            "    ",
            "    multi_add_portrait;Quinley;FarLeft;Ailsa;MidLeft;Laisren;FarRight",
            "    # Laisren shows up and joins the party!",
            "    speak;Ailsa;Laisren!",
            "    speak;Laisren;[filler]",
            "    speak;Quinley;Fight our way back?",
            "    speak;Laisren;Impossible!",
            "    multi_remove_portrait;Quinley;Ailsa;Elspeth;Laisren",
            "    ",
            "    move_cursor;21, 0",
            "    flicker_cursor;21, 0",
            "    add_unit;Cawthorne;21, 0;fade;push;north",
            "    move_unit;Cawthorne;17, 1;normal;push",
            "    multi_add_portrait;Cawthorne;Right;Laisren;Left",
            "    # Cawthorne meets the party, they're sandwiched between him and Shallcross.",
            "    speak;Cawthorne;[Filler]",
            "    speak;Laisren;filler",
            "    multi_remove_portrait;Cawthorne;Laisren",
            "    wait;250",
            "    ",
            "    move_unit;Saraid;8, 10;normal;push;no_block;no_follow",
            "    move_unit;Quinley;9, 9;normal;push;no_block;no_follow",
            "    move_unit;Elwynn;14, 9;normal;push;no_block;no_follow",
            "    move_unit;Elspeth;10, 10;normal;push;no_block;no_follow",
            "    move_unit;Orla;15, 8;normal;push;no_block;no_follow",
            "    move_unit;Ailsa;8, 8;normal;push;no_block;no_follow",
            "    move_unit;Corridon;13, 10;normal;push;no_block;no_follow",
            "    move_unit;Cawthorne;20, 0;normal;no_block;no_follow",
            "    move_unit;Laisren;13, 8;normal;push",
            "    wait;250",
            "    ",
            "    ",
            "end",
            "",
            "move_cursor;Cawthorne",
            "wait;250",
            "add_portrait;Cawthorne;Right",
            "# Cawthorne mentions that any of his lieutenants that survived should show up at any time.",
            "speak;Cawthorne;filler",
            "remove_portrait;Cawthorne",
            "wait;250",
            "",
            "# Group 1",
            "move_cursor;0, 9",
            "wait;250",
            "spawn_group;Starting1;west;0, 9;normal;stack",
            "move_group;Starting1;Starting1",
            "wait;500",
            "# Group 2",
            "move_cursor;5, 0",
            "wait;250",
            "spawn_group;Starting2;north;5, 0;normal;stack",
            "move_group;Starting2;Starting2",
            "wait;500",
            "# Group 3",
            "move_cursor;15, 0",
            "wait;250",
            "spawn_group;Starting3;north;12, 0;normal;stack",
            "move_group;Starting3;Starting3",
            "wait;500",
            "",
            "move_cursor;21, 0",
            "wait;250",
            "add_unit;Enemy_14;18, 0;immediate;push;north",
            "add_unit;Enemy_15;21, 4;immediate;push;east",
            "add_unit;Enemy_5;21, 0;immediate;push;north",
            "move_unit;Enemy_5;19, 1;normal;no_block",
            "move_unit;Enemy_14;18, 1;normal",
            "wait;500",
            "",
            "move_cursor;0, 9",
            "if;{v:AckermanDead} == 0",
            "    autolevel_to;Ackerman;5",
            "    add_unit;Ackerman;0, 8;immediate;push;north",
            "    flicker_cursor;Ackerman",
            "    add_portrait;Ackerman;Left",
            "    speak;Ackerman;Endgame!",
            "    remove_portrait;Ackerman",
            "    change_ai;Ackerman;Yolo",
            "    remove_item;Ackerman;AngelFeather;no_banner",
            "    remove_item;Ackerman;EmeraldAxe;no_banner",
            "    remove_item;Ackerman;LunarArc;no_banner",
            "    give_item;Ackerman;LunarArc;droppable;no_banner",
            "    give_item;Ackerman;Silver Axe;no_banner",
            "else",
            "    add_unit;Sub_1;0, 9;immediate;push;north",
            "end",
            "move_cursor;12, 0",
            "if;{v:BrassfieldDead} == 0",
            "    autolevel_to;Brassfield;5",
            "    add_unit;Brassfield;12, 0;immediate;push;north",
            "    move_unit;Brassfield;12, 1;normal",
            "    flicker_cursor;Brassfield",
            "    add_portrait;Brassfield;Left",
            "    speak;Brassfield;Endgame!",
            "    remove_portrait;Brassfield",
            "    change_ai;Brassfield;AttackNoMove",
            "    remove_item;Brassfield;AngelFeather;no_banner",
            "    remove_item;Brassfield;HowlingBlade;no_banner",
            "    remove_item;Brassfield;Mace;no_banner",
            "    give_item;Brassfield;HowlingBlade;droppable;no_banner",
            "    give_item;Brassfield;EmeraldAxe;no_banner",
            "else",
            "    add_unit;Sub_2;12, 0;immediate;push;north",
            "    move_unit;Sub_2;12, 1;normal",
            "end",
            "move_cursor;8, 0",
            "if;{v:EmbersonDead} == 0",
            "    autolevel_to;Emberson;5",
            "    add_unit;Emberson;7, 0;immediate;push;north",
            "    flicker_cursor;Emberson",
            "    add_portrait;Emberson;Left",
            "    speak;Emberson;Endgame!",
            "    remove_portrait;Emberson",
            "    change_ai;Emberson;AttackNoMove",
            "    remove_item;Emberson;AngelFeather;no_banner",
            "    remove_item;Emberson;Incinerate;no_banner",
            "    remove_item;Emberson;Fire;no_banner",
            "    give_item;Emberson;Incinerate;droppable;no_banner",
            "    give_item;Emberson;Fire;no_banner",
            "else",
            "    add_unit;Sub_3;7, 0;immediate;push;north",
            "end",
            "",
            "move_cursor;2, 0",
            "if;{v:DavenportDead} == 0",
            "    autolevel_to;Davenport;5",
            "    add_unit;Davenport;2, 0;immediate;push;north",
            "    flicker_cursor;Davenport",
            "    add_portrait;Davenport;Left",
            "    speak;Davenport;Endgame!",
            "    remove_portrait;Davenport",
            "    change_ai;Davenport;AttackNoMove",
            "    remove_item;Davenport;AngelFeather;no_banner",
            "    remove_item;Davenport;WardensCleaver;no_banner",
            "    remove_item;Davenport;Silver Lance;no_banner",
            "    remove_item;Davenport;EtherealBlade;no_banner",
            "    give_item;Davenport;WardensCleaver;droppable;no_banner",
            "    give_item;Davenport;Silver Lance;no_banner",
            "    give_item;Davenport;EtherealBlade;no_banner",
            "else",
            "    add_unit;Sub_4;2, 0;immediate;push;north",
            "end",
            "",
            "move_cursor;1, 9",
            "change_team;Keeva;enemy",
            "add_tag;Keeva;Boss",
            "add_unit;Keeva;1, 9;warp",
            "wait;250",
            "multi_add_portrait;Keeva;Left;Shallcross;Right",
            "speak;Keeva;Shallcross...",
            "speak;Shallcross;Keeva...",
            "multi_remove_portrait;Keeva;Shallcross",
            "change_ai;Keeva;Keeva",
            "",
            "",
            "move_cursor;Orla",
            "flicker_cursor;Orla",
            "add_portrait;Orla;Right",
            "speak;Orla;[We're fucked, lul]",
            "remove_portrait;Orla",
            "if;{v:GotReclaimer} == 1",
            "    move_cursor;Elspeth",
            "    flicker_cursor;Elspeth",
            "    # IF the party has the Reclaimer, Elspeth tells Laisren he may just be able to use it.",
            "    speak;Elspeth;filler",
            "    remove_portrait;Elspeth",
            "end",
            "change_ai;Cawthorne;AttackNoMove",
            "change_ai;Shallcross;AttackNoMove",
            "",
            "",
            "level_var;DeadPlayers;0",
            "level_var;CawthorneDead;0",
            "level_var;GotohDeployed;0",
            "level_var;TraineeDeployed;0",
            "",
            "if;game.mode.nid != 'Normal'",
            "    give_skill;Cawthorne;CawMiracle;no_banner",
            "    modify_item_component;Keeva;TheAlmighty;weapon_rank;S",
            "    modify_item_component;Shallcross;TheConqueror;weapon_rank;S",
            "end",
            "",
            "if;'{v:EnemyReverse}' == 'Reversal'",
            "    trigger_script;Global GenericsWR",
            "elif;'{v:EnemyReverse}' == 'Double'",
            "    trigger_script;Global GenericsDR",
            "end",
            "trigger_script;Global GenericsAutoLevel",
            "",
            "if;'{v:ReverseRecruitment}' == 'Yes'",
            "    show_layer;LeftRR;immediate",
            "    show_layer;RightRR;immediate",
            "end",
            "",
            "if;'{v:Jukebox}' == 'I Wanna Rock!'",
            "    change_music;player_phase;Onward",
            "    change_music;enemy_phase;Onward",
            "    change_music;enemy2_phase;Onward",
            "    change_music;other_phase;Onward",
            "elif;'{v:Jukebox}' == 'Play Some Grooves!'",
            "    change_music;player_phase;Hello Monday",
            "    change_music;enemy_phase;Hello Monday",
            "    change_music;enemy2_phase;Hello Monday",
            "    change_music;other_phase;Hello Monday",
            "else",
            "    change_music;player_phase;Inevitable Fate Pt. 1",
            "    change_music;enemy_phase;Inevitable Fate Pt. 1",
            "    change_music;enemy2_phase;Inevitable Fate Pt. 1",
            "    change_music;other_phase;Inevitable Fate Pt. 1",
            "end",
            "",
            "prep;1;Before An Impossible Battlefield"
        ]
    }
]