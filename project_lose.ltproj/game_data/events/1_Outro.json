[
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "remove_skill;Garvey (Garvey);NPCVision (NPCVision);FLAG(no_banner)",
            "remove_skill;Lamonte (Lamonte);NPCVision (NPCVision);FLAG(no_banner)",
            "show_layer;Box1",
            "show_layer;Box2",
            "show_layer;Box3",
            "show_layer;Box4",
            "show_layer;Box5",
            "remove_all_units",
            "enable_fog_of_war;false",
            "add_weather;night",
            "add_unit;Alpin (Alpin);9, 13;immediate",
            "add_unit;Carlin (Carlin);8, 14;immediate",
            "add_unit;Shayla (Shayla);10, 14;immediate",
            "add_unit;Raelin (Raelin);9, 15;immediate",
            "add_unit;Elwynn (Elwynn);11, 15;immediate",
            "add_unit;Saraid (Saraid);12, 14;immediate",
            "add_unit;Quinley (Quinley);13, 15;immediate",
            "add_unit;Soldier (Cutscene_5);15, 16;immediate;stack",
            "move_cursor;17, 17",
            "if;{v:LeodDead} == 0",
            "add_unit;Leod (Leod);11, 13;immediate",
            "end",
            "transition;open",
            "# Party is standing outside of the church.",
            "# Garvey and Lamonte show up.",
            "# A surviving enemy attacks Lamonte but Leod warns him of it in time.",
            "multi_add_portrait;Elwynn;MidRight;Quinley;FarRight;Carlin;FarLeft;Shayla;MidLeft",
            "speak;Elwynn;filler",
            "multi_remove_portrait;Elwynn;Quinley;Carlin;Shayla",
            "flicker_cursor;15, 17",
            "flicker_cursor;16, 17",
            "if;{v:LeodDead} == 0",
            "set_current_hp;Leod (Leod);10",
            "add_unit;Lamonte (Lamonte);15, 17;fade;push;south",
            "add_unit;Garvey (Garvey);16, 17;fade;push;south",
            "add_portrait;Leod (Leod);Left",
            "speak;Leod;filler",
            "remove_portrait;Leod (Leod)",
            "flicker_cursor;Soldier (Cutscene_5)",
            "add_unit;Soldier (Cutscene_6);15, 16;immediate;stack",
            "remove_unit;Soldier (Cutscene_5);immediate",
            "interact_unit;Soldier (Cutscene_6);Lamonte (Lamonte);miss1,end;Iron Lance;force_no_animation",
            "interact_unit;Lamonte (Lamonte);Soldier (Cutscene_6);crit1,end;Lance10 (Lance10);force_no_animation",
            "kill_unit;Soldier (Cutscene_6)",
            "add_portrait;Lamonte;Right",
            "speak;Lamonte;filler!",
            "remove_portrait;Lamonte",
            "wait;250",
            "move_unit;Lamonte (Lamonte);13, 14;normal",
            "move_unit;Garvey (Garvey);13, 13;normal",
            "multi_add_portrait;Leod (Leod);Left;Lamonte;MidRight;Garvey;FarRight",
            "# Lamonte and Garvey approach the party and Leod starts to call out Garvey on for what happened earlier.",
            "# Garvey becomes an enemy, attacking Leon but he survives; Lamonte kills Garvey. Lamonte becomes playable.",
            "# Rest of the party super confused.",
            "speak;Leod;filler",
            "multi_remove_portrait;Leod (Leod);Lamonte;Garvey",
            "flicker_cursor;Garvey (Garvey)",
            "change_team;Garvey (Garvey);enemy",
            "wait;250",
            "add_portrait;Garvey;Right",
            "speak;Garvey;filler",
            "remove_portrait;Garvey",
            "interact_unit;Garvey (Garvey);Leod (Leod);hit1,end;Iron Bow (Bow9);force_no_animation",
            "add_portrait;Leod (Leod);Left",
            "speak;Leod;filler",
            "remove_portrait;Leod (Leod)",
            "add_portrait;Lamonte;Left",
            "speak;Lamonte;filler",
            "remove_portrait;Lamonte",
            "# Lamonte kills Garvey",
            "interact_unit;Lamonte (Lamonte);Garvey (Garvey);crit1,end;Lance10 (Lance10);force_no_animation",
            "flicker_cursor;Lamonte (Lamonte)",
            "change_team;Lamonte (Lamonte);player",
            "move_unit;Lamonte (Lamonte);12, 13;normal;push",
            "wait;250",
            "multi_add_portrait;Leod (Leod);Left;Lamonte;Right",
            "speak;Lamonte;filler",
            "speak;Leod;filler",
            "multi_remove_portrait;Leod (Leod);Lamonte",
            "transition;close;1000;255, 255, 255",
            "change_tilemap;AlleywaySepia",
            "add_unit;Wall (Crates);1, 4;immediate",
            "resurrect;Garvey (Garvey)",
            "change_team;Garvey (Garvey);other",
            "change_team;Lamonte (Lamonte);other",
            "transition;open;1000;255, 255, 255",
            "location_card;Earlier...",
            "add_unit;Leod (Leod);7, 9;fade;push;south",
            "add_portrait;Leod (Leod);Left",
            "# Flashback to earlier at the alleyway (same dialogue)",
            "speak;Leod;filler",
            "remove_portrait;Leod (Leod)",
            "wait;250",
            "move_unit;Leod (Leod);0, 5;normal",
            "add_unit;Garvey (Garvey);7, 9;fade;push;south",
            "wait;250",
            "add_portrait;Garvey;Left",
            "speak;Garvey;filler",
            "remove_portrait;Garvey",
            "move_unit;Garvey (Garvey);2, 4;normal;push",
            "wait;250",
            "add_unit;Lamonte (Lamonte);7, 9;fade;push;south",
            "wait;500",
            "speak;;LEOD!;top_left;50",
            "# It's revealed that Garvey knocked over the crates to seperate Leod from them",
            "flicker_cursor;Garvey (Garvey)",
            "interact_unit;Garvey (Garvey);1, 4;hit1,end;Iron Bow (Bow1);force_no_animation",
            "show_layer;Crates",
            "speak;;AH!;top_left;50",
            "remove_unit;Leod (Leod);fade;west",
            "transition;close;1000;255, 255, 255",
            "remove_all_units",
            "add_weather;night",
            "change_tilemap;Ch2",
            "show_layer;Box1",
            "show_layer;Box2",
            "show_layer;Box3",
            "show_layer;Box4",
            "show_layer;Box5",
            "move_cursor;17, 17",
            "add_unit;Alpin (Alpin);9, 13;immediate",
            "add_unit;Carlin (Carlin);8, 14;immediate",
            "add_unit;Shayla (Shayla);10, 14;immediate",
            "add_unit;Raelin (Raelin);9, 15;immediate",
            "add_unit;Elwynn (Elwynn);11, 15;immediate",
            "add_unit;Saraid (Saraid);12, 14;immediate",
            "add_unit;Quinley (Quinley);13, 15;immediate",
            "add_unit;Leod (Leod);11, 13;immediate",
            "add_unit;Lamonte (Lamonte);12, 13;immediate",
            "change_team;Lamonte (Lamonte);player",
            "transition;open;1000;255, 255, 255",
            "# Back to the party",
            "multi_add_portrait;Leod (Leod);MidLeft;Elwynn;FarLeft;Lamonte;MidRight;Quinley;FarRight",
            "speak;Lamonte;filler",
            "multi_remove_portrait;Leod (Leod);Elwynn;Lamonte;Quinley",
            "end",
            "if;{v:LeodDead} == 1",
            "# Party is standing outside of the church.",
            "# Garvey and Lamonte show up.",
            "# A surviving enemy attacks Lamonte. Since Leod isn't there, the soldier kills Lamonte and Garvey becomes playable.",
            "add_unit;Lamonte (Lamonte);15, 17;fade;push;south",
            "set_current_hp;Lamonte;4",
            "add_unit;Garvey (Garvey);16, 17;fade;push;south",
            "wait;250",
            "flicker_cursor;Soldier (Cutscene_5)",
            "add_unit;Soldier (Cutscene_6);15, 16;immediate;stack",
            "remove_unit;Soldier (Cutscene_5);immediate",
            "interact_unit;Soldier (Cutscene_6);Lamonte (Lamonte);crit1,end;Steel Axe (Steel Axe);1;force_no_animation",
            "interact_unit;Garvey (Garvey);Soldier (Cutscene_6);crit1,end;;force_no_animation",
            "move_unit;Garvey (Garvey);13, 13;normal",
            "multi_add_portrait;Garvey;Right;Saraid;FarLeft;Quinley;MidLeft",
            "# The gang lament Lamonte's death and Garvey asks about Leod",
            "# He ded.",
            "speak;Garvey;...",
            "speak;Saraid;...",
            "flicker_cursor;Garvey (Garvey)",
            "change_team;Garvey (Garvey);player",
            "multi_remove_portrait;Garvey;Saraid;Quinley",
            "end",
            "flicker_cursor;11, 12",
            "sound;Unlock",
            "show_layer;Mid",
            "add_unit;Elspeth (Elspeth);11, 12;fade",
            "flicker_cursor;Elspeth (Elspeth)",
            "add_portrait;Elspeth;Left",
            "# Elspeth opens the church door, speaks with the party then lets them inside.",
            "speak;Elspeth;filler",
            "remove_portrait;Elspeth",
            "remove_unit;Elspeth (Elspeth);fade",
            "move_unit;Alpin (Alpin);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Alpin (Alpin);fade",
            "move_unit;Carlin (Carlin);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Carlin (Carlin);fade",
            "move_unit;Shayla (Shayla);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Shayla (Shayla);fade",
            "move_unit;Raelin (Raelin);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Raelin (Raelin);fade",
            "move_unit;Elwynn (Elwynn);11, 12;normal;;FLAG(no_follow)",
            "remove_unit;Elwynn (Elwynn);fade",
            "move_unit;Saraid (Saraid);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Saraid (Saraid);fade",
            "move_unit;Quinley (Quinley);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Quinley (Quinley);fade",
            "if;{v:LeodDead} == 0",
            "move_unit;Leod (Leod);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Leod (Leod);fade",
            "move_unit;Lamonte (Lamonte);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Lamonte (Lamonte);fade",
            "end",
            "if;{v:LeodDead} == 1",
            "move_unit;Garvey (Garvey);11, 12;normal;FLAG(no_follow)",
            "remove_unit;Garvey (Garvey);fade",
            "end",
            "sound;Unlock",
            "hide_layer;Mid",
            "wait;500",
            "move_cursor;17, 17",
            "flicker_cursor;15, 17",
            "add_unit;Emberson (Emberson);15, 17;fade;push;south",
            "add_unit;Soldier (Cutscene_3);14, 17;fade;push;south",
            "add_unit;Soldier (Cutscene_4);16, 17;fade;push;south",
            "move_unit;Emberson (Emberson);11, 13;normal;push;FLAG(no_block);FLAG(no_follow)",
            "move_unit;Soldier (Cutscene_3);10, 14;normal;push;FLAG(no_block);FLAG(no_follow)",
            "move_unit;Soldier (Cutscene_4);12, 14;normal;push;FLAG(no_follow)",
            "wait;250",
            "add_portrait;Emberson (Emberson);Left",
            "# The boss of Ch 3 shows up and tells his goons to burn the place and go inside.",
            "speak;Emberson (Emberson);filler.",
            "remove_portrait;Emberson (Emberson)",
            "# Have Brassfield and Emberson meet?",
            "if;{v:BrassfieldDead} == 0",
            "change_background;TownSunset",
            "transition;open",
            "add_portrait;Brassfield;Left",
            "s;Brassfield;[I survived].",
            "remove_portrait;Brassfield",
            "wait;250",
            "end"
        ]
    }
]