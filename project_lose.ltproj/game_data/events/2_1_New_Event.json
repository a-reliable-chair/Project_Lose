[
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "2_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;got_reclaimer;0",
            "change_background;InsideCastle",
            "transition;open",
            "if;{v:got_reclaimer} == 0",
            "multi_add_portrait;Alpin;FarLeft;Elwynn;MidLeft;Sloane;FarRight;Quinley;MidRight",
            "speak;Elwynn;We failed!",
            "end",
            "multi_remove_portrait;Alpin;Elwynn;Sloane;Quinley",
            "if;{v:got_reclaimer} == 1",
            "multi_add_portrait;Alpin;FarLeft;Elwynn;MidLeft;Sloane;FarRight;Quinley;MidRight",
            "speak;Elwynn;We succeeded!",
            "multi_remove_portrait;Alpin;Elwynn;Sloane;Quinley",
            "end",
            "transition;close",
            "change_background",
            "change_tilemap;Ch2",
            "show_layer;Boxes",
            "show_layer;Mid",
            "add_weather;light",
            "move_cursor;11, 12",
            "transition;open",
            "wait;500",
            "add_unit;Alpin (Alpin);11, 12;immediate;stack",
            "add_unit;Carlin (Carlin);11, 12;immediate;stack",
            "add_unit;Shayla (Shayla);11, 12;immediate;stack",
            "add_unit;Zoya (Zoya);11, 12;immediate;stack",
            "add_unit;Elwynn (Elwynn);11, 12;immediate;stack",
            "add_unit;Elspeth (Elspeth);11, 12;immediate;stack",
            "add_unit;Quinley (Quinley);11, 12;immediate;stack",
            "add_unit;Sloane (Sloane);11, 12;immediate;stack",
            "add_unit;Garvey (Garvey);11, 12;immediate;stack",
            "add_unit;Lamonte (Lamonte);11, 12;immediate;stack",
            "add_unit;Leod (Leod);11, 12;immediate;stack",
            "move_unit;Alpin (Alpin);14, 17;normal;stack;FLAG(no_block)",
            "move_unit;Carlin (Carlin);15, 17;normal;stack;FLAG(no_block)",
            "move_unit;Shayla (Shayla);16, 17;normal;stack;FLAG(no_block)",
            "move_unit;Zoya (Zoya);17, 17;normal;stack;FLAG(no_block)",
            "move_unit;Elwynn (Elwynn);14, 17;normal;stack;FLAG(no_block)",
            "move_unit;Elspeth (Elspeth);15, 17;normal;stack;FLAG(no_block)",
            "move_unit;Quinley (Quinley);16, 17;normal;stack;FLAG(no_block)",
            "move_unit;Sloane (Sloane);17, 17;normal;stack;FLAG(no_block)",
            "move_unit;Garvey (Garvey);14, 17;normal;stack;FLAG(no_block)",
            "move_unit;Lamonte (Lamonte);15, 17;normal;stack;FLAG(no_block)",
            "move_unit;Leod (Leod);16, 17;normal;stack",
            "remove_unit;Alpin (Alpin);immediate;south",
            "remove_unit;Carlin (Carlin);immediate;south",
            "remove_unit;Shayla (Shayla);immediate;south",
            "remove_unit;Zoya (Zoya);immediate;south",
            "remove_unit;Elwynn (Elwynn);immediate;south",
            "remove_unit;Quinley (Quinley);immediate;south",
            "remove_unit;Sloane (Sloane);immediate;south",
            "remove_unit;Elspeth (Elspeth);immediate;south",
            "remove_unit;Lamonte (Lamonte);immediate;south",
            "remove_unit;Garvey (Garvey);immediate;south",
            "remove_unit;Leod (Leod);immediate;south",
            "wait;500",
            "# Castle",
            "change_tilemap;Castle Exterior",
            "add_unit;Kingdom (Kingdom_1);3, 3;immediate",
            "add_unit;Kingdom (Kingdom_2);3, 8;immediate",
            "add_unit;Kingdom (Kingdom_3);8, 9;immediate",
            "add_unit;Kingdom (Kingdom_4);10, 9;immediate",
            "add_unit;Kingdom (Kingdom_5);3, 0;immediate",
            "add_unit;Kingdom (Kingdom_6);4, 9;immediate",
            "add_unit;Kingdom (Kingdom_7);8, 3;immediate",
            "add_unit;Kingdom (Kingdom_8);10, 3;immediate",
            "#play music",
            "transition;open;500",
            "add_unit;Cathal (Cathal);9, 11;fade;push;south",
            "wait;500",
            "move_unit;Cathal (Cathal);9, 10;normal;push",
            "wait;500",
            "add_portrait;Cathal;Left",
            "add_portrait;SoldierBlue;MidRight",
            "add_portrait;SoldierRed;FarRight",
            "speak;SoldierBlue;Cathal!",
            "speak;Cathal;Invaded!",
            "bop_portrait;SoldierRed",
            "speak;SoldierRed;You may pass, soldier!",
            "speak;Cathal;Yes, sir!",
            "multi_remove_portrait;Cathal;SoldierBlue;SoldierRed",
            "move_unit;Cathal (Cathal);9, 4;normal;push",
            "wait;500",
            "add_portrait;Cathal;Left",
            "add_portrait;SoldierBlue;MidRight",
            "add_portrait;SoldierRed;FarRight",
            "speak;SoldierBlue;Cathal!",
            "speak;Cathal;Invaded!",
            "bop_portrait;SoldierRed",
            "speak;SoldierRed;Hurry inside!",
            "speak;Cathal;Yes, sir!",
            "multi_remove_portrait;Cathal;SoldierBlue;SoldierRed",
            "move_unit;Cathal (Cathal);9, 2;normal;push",
            "wait;500",
            "remove_unit;Cathal (Cathal);immediate",
            "wait;500",
            "transition;close;500",
            "remove_all_units",
            "change_tilemap;Castle Interior",
            "add_unit;King (King);8, 4;immediate",
            "add_unit;Keeva (Vizier);7, 4;immediate",
            "add_unit;Kingdom (Kingdom_9);1, 3;immediate",
            "add_unit;Kingdom (Kingdom_10);10, 8;immediate",
            "add_unit;Kingdom (Kingdom_11);3, 3;immediate",
            "add_unit;Kingdom (Kingdom_12);6, 8;immediate",
            "add_unit;Kingdom (Kingdom_13);6, 17;immediate",
            "add_unit;Kingdom (Kingdom_14);10, 17;immediate",
            "add_unit;Kingdom (Kingdom_15);6, 13;immediate",
            "add_unit;Kingdom (Kingdom_16);10, 13;immediate",
            "add_unit;Kingdom (Kingdom_17);0, 7;immediate",
            "add_unit;Kingdom (Kingdom_18);16, 9;immediate",
            "add_unit;Kingdom (Kingdom_19);16, 11;immediate",
            "add_unit;Kingdom (Kingdom_20);0, 4;immediate",
            "add_unit;Kingdom (Kingdom_21);3, 6;immediate",
            "add_unit;Kingdom (Kingdom_22);12, 5;immediate",
            "add_unit;Kingdom (Kingdom_23);4, 5;immediate",
            "add_unit;Kingdom (Kingdom_24);13, 6;immediate",
            "move_cursor;King (King);FLAG(immediate)",
            "transition;open;500",
            "move_cursor;8, 17",
            "add_unit;Cathal (Cathal);8, 17",
            "wait;500",
            "move_unit;Cathal (Cathal);8, 10",
            "move_cursor;King (King)",
            "wait;500",
            "multi_add_portrait;Cathal;Right;King (King);Left",
            "speak;Cathal;Milord!",
            "move_portrait;King (King);MidLeft",
            "add_portrait;Keeva (Vizier);FarLeft",
            "speak;Vizier;You dare address the king?!",
            "speak;Cathal;Milord, (village invaded)",
            "# Dialogue",
            "multi_remove_portrait;Cathal;King (King);Keeva (Vizier)",
            "move_unit;King (King);8, 8;normal;push",
            "move_unit;Keeva (Vizier);7, 7;normal;push",
            "#Play song",
            "wait;500",
            "multi_add_portrait;Cathal;Right;King (King);Left",
            "# King \"Ultimately, their lives are insignificant...\"",
            "speak;King (King);(Speech)",
            "multi_remove_portrait;Cathal;King (King)",
            "move_unit;Cathal (Cathal);8, 12;normal;FLAG(no_block)",
            "move_unit;Kingdom (Kingdom_15);8, 13;normal;FLAG(no_block)",
            "move_unit;Kingdom (Kingdom_16);9, 13;normal",
            "wait;500",
            "multi_add_portrait;SoldierBlue;FarLeft;SoldierRed;MidLeft;Cathal;Right",
            "speak;SoldierBlue;Halt!",
            "multi_remove_portrait;SoldierBlue;SoldierRed;Cathal",
            "wait;500",
            "flicker_cursor;King (King)",
            "wait;500",
            "add_portrait;King (King);Left",
            "speak;King (King);I have no use for a soldier who won't follow orders. Let him go.",
            "remove_portrait;King (King)",
            "wait;500",
            "move_unit;Kingdom (Kingdom_15);7, 13;normal;FLAG(no_block)",
            "move_unit;Kingdom (Kingdom_16);10, 13;normal",
            "wait;500",
            "move_unit;Cathal (Cathal);8, 17;normal;push",
            "wait;500",
            "remove_unit;Cathal (Cathal);fade;south"
        ]
    }
]