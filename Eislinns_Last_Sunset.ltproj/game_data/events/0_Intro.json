[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;not RECORDS.get(\"HardCleared\")",
            "    game_var;ReverseRecruitment;'No'",
            "    game_var;PlayerReverse;'No Reversal'",
            "    game_var;EnemyReverse;'No Reversal'",
            "    give_skill;Alpin;Flail_Lance;no_banner",
            "end",
            "",
            "if;not RECORDS.get(\"NormalCleared\")",
            "    game_var;Jukebox;False",
            "end",
            "level_var;DeadPlayers;0",
            "",
            "if;'{v:ReverseRecruitment}' == 'Yes'",
            "    change_tilemap;Ch1",
            "    add_weather;sunset",
            "    add_group;Enemy1;Enemy1;immediate",
            "    add_unit;Laisren;3,3;immediate",
            "    add_unit;Corridon;1,3;immediate",
            "    add_unit;Orla;2,4;immediate",
            "    add_unit;Ailsa;4,2;immediate",
            "    add_unit;Elspeth;2,2;immediate",
            "    change_team;Laisren;player",
            "    change_team;Corridon;player",
            "    change_team;Orla;player",
            "    change_team;Ailsa;player",
            "    change_team;Elspeth;player",
            "    give_skill;Elspeth;Guidance;no_banner",
            "    give_skill;Laisren;AspiringLeader;no_banner",
            "else",
            "    level_var;RaelinAckerman;0",
            "    game_var;AlpinVisited;0",
            "    game_var;CarlinVisited;0",
            "    game_var;ShaylaVisited;0",
            "    game_var;RaelinVisited;0",
            "    game_var;RaelinBoss;0",
            "    game_var;AlpinUgraded;0",
            "    game_var;LeodHouse;0",
            "    game_var;CarlinUpgraded;0",
            "    game_var;RaelinUpgraded;0",
            "    game_var;ShaylaUpgraded;0",
            "    game_var;CarlinHouse;0",
            "    game_var;ShaylaHouse;0",
            "    game_var;RaelinHouse;0",
            "    game_var;ElwynnHouse;0",
            "    game_var;ElspethHouse;0",
            "    game_var;AlpinHouse;0",
            "    game_var;CorridonHouse;0",
            "    game_var;AilsaHouse;0",
            "    game_var;OrlaHouse;0",
            "    # Intro",
            "    change_background;BlackBackground",
            "    transition;open",
            "    music;Days Gone",
            "    s;???;You know, this town wasn't always like this.",
            "    #//Establishing shot of the town, sepia filter so you know it's the past",
            "    transition;close",
            "    change_background",
            "    change_tilemap;TownSepia",
            "    move_cursor;7,58;immediate",
            "    transition;open;2000;255,255,255",
            "    s;???;Used to be, Eislinn was a place of warriors.{w} Heroes.{w} Legends.",
            "    move_cursor;11,44;5000",
            "    s;???;In the old days, back when enemies darkened our doorsteps,{w} men like Taran were what barred their path.",
            "    move_cursor;33,42;5000",
            "    #//holy crap what if there was a CG of a cool guy :O",
            "    s;???;The tales say he struck down a hundred men, all on his own.{w} Sounds like bull to me, but folk don't tell stories like that for nothing.",
            "    move_cursor;30,31;5000",
            "    s;???;Whatever the truth is, he saved countless lives,{w} and made a damn good impression doing it.{w} They say the lance he used was blessed by the Goddess herself.",
            "    move_cursor;3,25;5000",
            "    s;???;It's still in the church, to this day.{w} It's true, I've seen it myself, I have!",
            "    move_cursor;34,22;5000",
            "    s;???;Can you imagine, living in such a time...?{w}{clear}There ain't a soul living here today who could hold a candle to him, I reckon.",
            "    move_cursor;6,0;5000",
            "    s;???;...{w} Pfeh.{w} 'Specially not the souls who waste my precious time by sleeping through my class!",
            "    end_skip",
            "    transition;close",
            "    # The School",
            "    music;Another Slow Day",
            "    change_tilemap;School",
            "    add_unit;Elwynn;10, 1;immediate",
            "    add_unit;Elspeth;8, 1;immediate",
            "    add_unit;Kid_1;11, 3;immediate",
            "    add_unit;Kid_2;12, 4;immediate",
            "    add_unit;Kid_3;10, 4;immediate",
            "    add_unit;Kid_4;9, 3;immediate",
            "    add_unit;Kid_5;8, 4;immediate",
            "    multi_add_portrait;Alpin;Left;Elwynn;FarRight;Elspeth;MidRight",
            "    expression;Alpin;CloseEyes",
            "    transition;open;500;255,255,255",
            "    #    //Scene quickly fades to white, then to reality, revealing the class.",
            "    s;Elwynn;Alpin! Get the hells up!",
            "    s;Alpin;{c:expression;Alpin;HalfCloseEyes}Whuh-!?{w} {c:bop_portrait;Alpin}I-I'm not sleeping, {c:expression;Alpin;OpenEyes}I'm not!",
            "    s;Elwynn;Yeah, sure as hell not anymore.{w}{clear}I'm doing you an act of charity, you lout, least you could do is pretend to care.",
            "    s;Elspeth;Leave the poor boy alone, Elwynn.{w} No child enjoys history lessons.",
            "    s;Alpin;Oh, I...{w} I don't mean to be rude.{w}{clear}I just...{w} practicing fighting's more fun than reading about it.",
            "    s;Elspeth;At least he's enthusiastic about something, hm?",
            "    s;Elwynn;Yeah, yeah, whatever.{w} I'll let you off the hook for now.{w} That was the end of the story, anyway.",
            "    multi_remove_portrait;Alpin;Elwynn;Elspeth",
            "    wait;250",
            "    multi_add_portrait;Boy;FarLeft;Carlin;MidLeft;Shayla;MidRight;Raelin;FarRight",
            "    #//The camera shifts to focus on the kids",
            "    expression;Shayla;Smile",
            "    s;Shayla;Finally.{w} I thought he'd never shut the hell up...",
            "    s;Raelin;Shay!{w} He's trying his best!{w} I think...",
            "    s;Carlin;If this is his best, maybe he should be the one in school.",
            "    s;Boy;Don't be mean, you guys...",
            "    multi_remove_portrait;Shayla;Raelin",
            "    multi_add_portrait;Elwynn;FarRight;Elspeth;MidRight",
            "    s;Elspeth;Well then, perhaps it'd be best to start the combat practice now, hm?",
            "    s;Elwynn;Wha...?{w} 'S a bit early for that, don't you think?",
            "    mirror_portrait;Elspeth",
            "    s;Elspeth;I say they've earned a break.{w} Besides...",
            "    move_portrait;Elspeth;Right",
            "    #//She moves closer for a moment",
            "    s;Elspeth;There's something we need to talk about.{w} Now.",
            "    expression;Elwynn;CloseEyes",
            "    mirror_portrait;Elspeth",
            "    move_portrait;Elspeth;MidRight",
            "    s;Boy;Come on, teach!{w} Please?{w} For us?",
            "    expression;Elwynn;OpenEyes",
            "    s;Elwynn;...{w} Eh, fine{w}. Go on then, you.{w} Grab your weapons and all that.",
            "    s;Boy;Thank you, teach!{w} You're the best!",
            "    multi_remove_portrait;Elspeth;Elwynn",
            "    multi_add_portrait;Shayla;MidRight;Alpin;FarRight",
            "    bop_portrait;Shayla",
            "    s;Shayla;Hah!{w} Y'hear that?{w} No more history!{w} We're free!",
            "    remove_portrait;Shayla",
            "    move_unit;Kid_3;7,7;normal;no_follow",
            "    sound;Unlock;1",
            "    show_layer;Mid",
            "    move_unit;Kid_3;7,9;normal;no_follow",
            "    remove_unit;Kid_3;fade;south",
            "    expression;Alpin;Smile",
            "    s;Alpin;I call first bout with Shayla!",
            "    remove_portrait;Alpin",
            "    move_unit;Kid_1;7,9;normal;stack;60;no_follow",
            "    remove_unit;Kid_1;fade;south",
            "    add_portrait;Raelin;Right",
            "    bop_portrait;Raelin",
            "    s;Raelin;Hey, no fair!{w} That was my plan!",
            "    multi_remove_portrait;Raelin;Boy;Carlin",
            "    move_unit;Kid_2;7,9;normal;stack;60;no_follow",
            "    remove_unit;Kid_2;fade;south",
            "    move_unit;Kid_4;7,9;normal;stack;60;no_follow",
            "    remove_unit;Kid_4;fade;south",
            "    move_unit;Kid_5;7,9;normal;stack;60;no_follow",
            "    remove_unit;Kid_5;fade;south",
            "    #//The kids run off",
            "    move_unit;Elwynn;8,5;normal;stack;60;no_block;no_follow",
            "    move_unit;Elspeth;7,5;normal;stack;60;no_follow",
            "    multi_add_portrait;Elspeth;Left;Elwynn;Right",
            "    s;Elwynn;Alright, Elspeth, what's got you all riled up this time?",
            "    s;Elspeth;...{w} Be honest with me.{w} Are you drunk right now?",
            "    expression;Elwynn;CloseEyes",
            "    s;Elwynn;...{w} Sorry.",
            "    s;Elspeth;I don't want your sorries, Elwynn.{w} Just...{w} I thought you'd at least do better for the kids.",
            "    s;Elwynn;...",
            "    expression;Elwynn;OpenEyes",
            "    s;Elspeth;I have business in the chapel.{w}{clear}You need to clean yourself up so you can look after them while I'm gone, alright?",
            "    s;Elwynn;Aye, I...{w} I'll do that.",
            "    remove_portrait;Elspeth",
            "    move_unit;Elspeth;7,9;normal;stack;60;no_follow",
            "    remove_unit;Elspeth",
            "    expression;Elwynn;CloseEyes",
            "    s;Elwynn;...{w} Damned fool I am...",
            "    transition;close",
            "    remove_portrait;Elwynn",
            "    remove_unit;Elwynn",
            "    end_skip",
            "    # The Plaza",
            "    change_tilemap;Ch2",
            "    show_layer;Boxes",
            "    move_cursor;0, 13;immediate",
            "    add_unit;Quinley;4, 0;immediate;push",
            "    transition;open;500",
            "    add_unit;Saraid;0, 13;fade;push;west",
            "    move_unit;Quinley;4, 11;normal;push;120;no_block;no_follow",
            "    move_unit;Saraid;3, 11;normal;giveup;120;no_follow",
            "    wait;250",
            "    multi_add_portrait;Saraid;Left;Quinley;Right",
            "    #//In the plaza, Saraid enters town and Quinley runs up to her",
            "    s;Quinley;Yoo, Saraid! What gives?{w}{clear}I can't remember the last time you strolled into town empty handed.",
            "    s;Saraid;Yeah, well, hunt went bad.{w} Total ghost town out there.{w}{clear}Something's got the critters spooked, I reckon.",
            "    bop_portrait;Quinley",
            "    expression;Quinley;Smile",
            "    s;Quinley;Ooooh, something supernatural, you think?{w} That could be exciting!",
            "    s;Saraid;Don't know, don't care -{w} it's bad for business, so I don't like it.",
            "    expression;Quinley;NoSmile",
            "    s;Quinley;I guess I can see that.{w} Welp!{w} Guess I'll be praying for you on your next hunt, huh?",
            "    s;Saraid;Fill your boots, Quinley.{w} I got places to be.",
            "    s;Quinley;Don't we all, huh?{w} Be seeing you!",
            "    s;Saraid;Yeah...",
            "    multi_remove_portrait;Saraid;Quinley",
            "    wait;250",
            "    move_unit;Saraid;14, 3;normal;no_block",
            "    move_unit;Quinley;18, 3;normal",
            "    wait;250",
            "    sound;Unlock",
            "    show_layer;TopLeft",
            "    wait;250",
            "    sound;Unlock",
            "    show_layer;TopRight",
            "    wait;250",
            "    move_unit;Saraid;14, 2;normal",
            "    wait;250",
            "    move_unit;Quinley;18, 2;normal",
            "    wait;250",
            "    remove_unit;Quinley;immediate",
            "    wait;250",
            "    remove_unit;Saraid;immediate",
            "    wait;250",
            "    sound;Unlock",
            "    hide_layer;TopLeft",
            "    wait;250",
            "    sound;Unlock",
            "    hide_layer;TopRight",
            "    wait;250",
            "    move_cursor;0,0;120",
            "    # Elspeth makes her way to the church",
            "    add_unit;Elspeth;3,0;fade;push;north",
            "    move_unit;Elspeth;11, 13;normal",
            "    add_portrait;Elspeth;Left",
            "    s;Elspeth;They know I'm busy at this hour...{w} Something must be amiss.",
            "    remove_portrait;Elspeth",
            "    wait;250",
            "    sound;Unlock",
            "    show_layer;Mid",
            "    move_unit;Elspeth;11, 12;normal",
            "    wait;250",
            "    remove_unit;Elspeth;immediate",
            "    wait;250",
            "    sound;Unlock",
            "    hide_layer;Mid",
            "    wait;250",
            "    # Leod Garvey and Lamonte pass by the church; Leod's on his way to a meeting",
            "    add_unit;Leod;9, 17;fade;push;south",
            "    add_unit;Garvey;8,17;fade;push;south",
            "    add_unit;Lamonte;9, 17;fade;push;south",
            "    move_unit;Leod;19, 9;normal;push;120;no_block",
            "    move_unit;Garvey;19, 10;normal;push;120;no_block",
            "    move_unit;Lamonte;18, 9;normal;push;120",
            "    wait;500",
            "    multi_add_portrait;Leod;Right;Lamonte;MidLeft;Garvey;FarLeft",
            "    s;Leod;This way, you two!{w} Come on then, pick your feet up, we're already late!",
            "    s;Garvey;We're fifteen minutes early...",
            "    bop_portrait;Leod",
            "    s;Leod;Correct!{w} And we should be twenty!{w} So keep up, will you?",
            "    multi_remove_portrait;Leod;Garvey;Lamonte",
            "    remove_unit;Leod;fade;east",
            "    remove_unit;Garvey;fade;east",
            "    move_unit;Lamonte;19, 9;normal;push;120",
            "    remove_unit;Lamonte;fade;east",
            "    end_skip",
            "    # Alleyway",
            "    change_tilemap;Alleyway",
            "    transition;open;500",
            "    add_unit;Leod;0, 5;fade;push;west",
            "    add_unit;Garvey;0,6;fade;push;south",
            "    add_unit;Lamonte;0, 5;fade;push;south",
            "    move_unit;Leod;5, 4;normal;push;120;no_block",
            "    move_unit;Garvey;4, 5;normal;push;120;no_block",
            "    move_unit;Lamonte;6, 5;normal;push;120",
            "    multi_add_portrait;Leod;Right;Garvey;FarLeft;Lamonte;MidLeft",
            "    # About to enter the building for his meeting, Leod bitches about the stack of crates they passed by (epic foreshadowing)",
            "    #//As they enter the alley",
            "    s;Leod;Hmph.{w} Still haven't moved these crates, I see.{w} How unseemly.",
            "    s;Garvey;Who cares?{w} It's just some boxes.",
            "    s;Leod;It's unseemly!{w} I swear, some people have no sense of grace...{w}{clear}Now, the two of you, wait outside.{w}{clear}And Lamonte, make sure Garvey stays out of trouble, hm?",
            "    s;Lamonte;Sure thing, boss, but I wouldn't worry about that.",
            "    s;Leod;Of course you wouldn't...",
            "    multi_remove_portrait;Leod;Garvey;Lamonte",
            "    sound;Unlock",
            "    show_layer;Door",
            "    wait;250",
            "    move_unit;Leod;5, 3;normal;no_block",
            "    move_unit;Lamonte;6, 4;normal",
            "    move_unit;Garvey;4, 4;normal",
            "    remove_unit;Leod;immediate",
            "    add_portrait;Garvey;Left",
            "    #//Leod enters the building",
            "    expression;Garvey;Smile",
            "    s;Garvey;Prick.",
            "    wait;500",
            "    #//Leod exits",
            "    add_unit;Leod;5, 3;immediate",
            "    wait;250",
            "    add_portrait;Leod;Right",
            "    s;Leod;I heard that!{w}{clear}You and I will be having a talk about this, you hear me, Garvey?",
            "    expression;Garvey;NoSmile",
            "    bop_portrait;Garvey",
            "    s;Garvey;Heh.{w} Sir, yes sir.",
            "    s;Leod;Hmph!",
            "    #//He re-enters again",
            "    remove_portrait;Leod",
            "    wait;250",
            "    remove_unit;Leod;immediate",
            "    wait;250",
            "    add_portrait;Lamonte;Right",
            "    s;Garvey;Tch.{w} Man's got pig fat for brains, and yet they put him in charge of the whole town...",
            "    s;Lamonte;He's not so bad.{w}{clear}I mean...{w} I'll admit he's not the most pleasant fellow, but he's got a hard job.",
            "    s;Garvey;Maybe the job would be easier if he weren't terrible at it...",
            "    s;Lamonte;Ah, give it a rest, Garvey.{w} It's always the same thing with you.",
            "    s;Garvey;Yeah, yeah, whatever.{w} Kissass.",
            "    expression;Lamonte;Smile",
            "    s;Lamonte;Heh.{w} Give it an hour, and you'll be all cheered up with a mug of ale, as usual.|It's all water under the bridge at the end of the day, ain't it?",
            "    expression;Lamonte;NoSmile",
            "    s;Garvey;...",
            "    multi_remove_portrait;Garvey;Lamonte",
            "    wait;250",
            "    add_unit;Leod;5, 3;immediate",
            "    wait;250",
            "    multi_add_portrait;Leod;Right;Garvey;FarLeft;Lamonte;MidLeft",
            "    # Leod finishes his meeting and tells the two [BAD NEWS FOR TOWN BUT HE GAINS MORE WEALTH]",
            "    expression;Leod;Smile",
            "    s;Leod;Hah!{w} Another deal, struck.{w} Prosperous days are coming, lad, prosperous days indeed!",
            "    s;Garvey;Prosperous, eh?{w} For all of us, or just you?",
            "    s;Leod;Now, now, Garvey, you know that any deal that benefits me benefits us all.|Now, come then, we've places to be.{w} Chop chop!",
            "    multi_remove_portrait;Leod;Garvey;Lamonte",
            "    wait;250",
            "    move_unit;Leod;7, 9;normal;push;120;no_block",
            "    move_unit;Garvey;8, 9;normal;push;120;no_block",
            "    move_unit;Lamonte;7, 8;normal;push;120",
            "    remove_unit;Leod;fade;south",
            "    remove_unit;Garvey;fade;south",
            "    move_unit;Lamonte;7, 9;normal;push;120",
            "    remove_unit;Lamonte;fade;south",
            "    end_skip",
            "    # Market / Pier",
            "    transition;close;500",
            "    change_tilemap;Ch4",
            "    add_unit;Ailsa;11, 23;immediate",
            "    add_unit;Orla;10, 21;immediate",
            "    add_unit;Corridon;12, 21;immediate",
            "    move_cursor;18, 25;immediate",
            "    wait;250",
            "    multi_add_portrait;Orla;Left;Ailsa;MidRight;Corridon;FarRight",
            "    transition;open;500",
            "    expression;Orla;Smile",
            "    expression;Corridon;Smile",
            "    # Filler, every day talk between the 3.",
            "    s;Orla;... and that's when I tell him,{w} \"You think the left hook's bad,{w} wait 'til you see my right!\"{w} And then, BAM!{w} Right in the jaw!",
            "    s;Corridon;Bahaha!{w} Bugger had it coming, I says!{w} Where's the fool, now?",
            "    s;Orla;Still sleeping off the ale, I reckon.{w} I made sure he found his bed before he keeled over.",
            "    s;Ailsa;You punched his lights out, and then...{w} walked him home?",
            "    s;Orla;Well, yeah!{w} Somebody had to tuck the big baby in, eh? Hah!",
            "    mirror_portrait;Orla",
            "    s;Orla;Hey, is that...{w} hah!{w} I don't believe it!",
            "    multi_remove_portrait;Orla;Ailsa;Corridon",
            "    move_cursor;0,25;1000",
            "    add_unit;Laisren;0,25;fade;push;west",
            "    wait;250",
            "    flicker_cursor;Laisren",
            "    s;Corridon;Oi!{w} Laisren!{w} When the hells did you get back in town?;top",
            "    wait;250",
            "    move_unit;Laisren;9,21;normal;push;120",
            "    wait;250",
            "    multi_add_portrait;Laisren;FarLeft;Orla;MidLeft;Ailsa;MidRight;Corridon;FarRight",
            "    s;Laisren;Hah!{w} Just now, my friend.{w} {c:expression;Laisren;Smile}Good to see you're all doing well!",
            "    expression;Orla;Smile",
            "    s;Orla;Just look at you, eh?{w} You were hardly more than a boy, last I saw you!",
            "    expression;Ailsa;Smile",
            "    s;Ailsa;We hear word from out of town.{w}{clear}An officer, at your age! You're something of a rising star, then?",
            "    s;Laisren;Something like that, heh.{w}{clear}Look, I'd love to stay and chat, but I can't keep my family waiting.{w}{clear}But!{w} I'll buy first round if you swing by the tavern tonight, alright?",
            "    expression;Corridon;Smile",
            "    s;Corridon;Hoo!{w} Twist my arm, why don'tcha?{w} 'Course we'll be there, lad!",
            "    s;Ailsa;Go on, your folks've missed you something fierce.",
            "    s;Laisren;Right.{w} See you all later!",
            "    multi_remove_portrait;Laisren;Ailsa;Orla;Corridon",
            "    wait;250",
            "    move_unit;Laisren;3,5;normal;push;120",
            "    wait;250",
            "    add_unit;Parent;3, 3;immediate",
            "    move_unit;Parent;2, 4;normal",
            "    wait;250",
            "    add_unit;Parent_1;3, 3;immediate",
            "    move_unit;Parent_1;4, 4;normal",
            "    wait;250",
            "    multi_add_portrait;Laisren;Left;LaisrenDad;MidRight;LaisrenMom;FarRight",
            "    # Laisren arrives in town on leave from the military and meets his parents outside before going in.",
            "    s;Laisren;Uh...{w} hey, guys!{w} I'm home!",
            "    expression;LaisrenDad;Smile",
            "    bop_portrait;LaisrenDad",
            "    s;LaisrenDad;Wh-{w} I-{w} L-Laisren!?{w} My word, is that you, boy!?",
            "    expression;LaisrenMom;Smile",
            "    s;LaisrenMom;I don't believe it!{w} Couldn't you have sent a letter, or-?",
            "    s;Laisren;I know, I know.{w}{clear}I left on short notice{semicolon}{w} brass thinks this might be my last chance to take leave.",
            "    s;LaisrenDad;Well, uh...{w} well, come on!{w} Come inside, then.{w}{clear}No use standing out here looking daft, let's get you something to eat, then!",
            "    s;LaisrenMom;Oh, your brother won't be home 'til late, mind you.{w} He'll be starting swordplay within the hour.",
            "    s;Laisren;Alpin always did love his swordplay...{w} I'll have to spar with him before I head back.",
            "    s;LaisrenMom;I'm sure he'd love that!{w} Now come on, in you go, then!{w} You oughta tell us what you've been up to, of late!",
            "    s;Laisren;Sure, sure-{w}{c:move_portrait;LaisrenMom;MidLeft} hey, don't pull!{w}{c:bop_portrait;Laisren} Mom-!",
            "    multi_remove_portrait;Laisren;LaisrenMom;LaisrenDad",
            "    move_unit;Parent;3, 3;normal",
            "    wait;250",
            "    remove_unit;Parent",
            "    move_unit;Parent_1;3, 3;normal",
            "    wait;250",
            "    remove_unit;Parent_1",
            "    wait;250",
            "    sound;Neigh",
            "    add_unit;Horse_1;3, 5;immediate;stack",
            "    add_unit;Horse;3, 5;immediate;stack",
            "    remove_unit;Laisren",
            "    wait;250",
            "    move_unit;Horse_1;3, 3",
            "    wait;250",
            "    remove_unit;Horse_1",
            "    wait;250",
            "    transition;close;500",
            "    remove_all_units",
            "    transition;open;1;0, 0, 0",
            "    end_skip",
            "    # Still in market / pier",
            "    add_weather;sunset",
            "    location_card;A few hours later...",
            "    move_cursor;0, 25;500",
            "    wait;500",
            "    music;Hulking Step of the Empire",
            "    add_unit;Temp;0, 25;fade;push;south",
            "    add_unit;Temp_1;1, 25;fade;push;south",
            "    add_unit;Temp_2;2, 25;fade;push;south",
            "    move_unit;Temp;2, 24;normal;push;no_block;no_follow",
            "    move_unit;Temp_1;3, 23;normal;push;no_block;no_follow",
            "    move_unit;Temp_2;4, 22;normal;push;no_block;no_follow",
            "    add_unit;Davenport;0, 25;fade;push;south",
            "    add_unit;Cawthorne;1,25;fade;push;south",
            "    add_unit;Temp_3;2, 25;fade;push;south",
            "    move_unit;Temp_3;7, 22;normal;push;no_block;no_follow",
            "    move_unit;Davenport;6, 23;normal;push;no_block;no_follow",
            "    move_unit;Cawthorne;5, 23;normal;push;no_follow",
            "    wait;500",
            "    multi_add_portrait;Cawthorne;Left;Davenport;Right",
            "    # At sunset the enemy empire invades the town, there's a brief convo between Ch5 boss and Ch4 boss",
            "    s;Cawthorne;They've yet to sound the alarm.{w} Looks like we caught them with their pants down.{w} Lieutenant Davenport, your report.",
            "    s;Davenport;... {w}The town guard are poorly trained, poorly equipped, and of...{w} poor stock.{w} With our men, and that blessed armour of yours...{w} they don't stand a chance.",
            "    s;Cawthorne;I see.{w} I suppose that will do.",
            "    s;Davenport;You sound...{w} disappointed, Cawthorne.",
            "    s;Cawthorne;Heh.{w} I suppose I am.{w} And that's Captain Cawthorne to you, Osgar.{w} Show some respect.",
            "    s;Davenport;...{w} Of course, Captain.{w} My apologies.",
            "    s;Cawthorne;Let's make this quick then.{w}{clear}The sooner we dispense of this rabble, the sooner we can find some more sporting foes.",
            "    remove_portrait;Cawthorne",
            "    s;Davenport;...",
            "    remove_portrait;Davenport",
            "    transition;close;500",
            "    remove_all_units",
            "    end_skip",
            "    # Plaza",
            "    change_tilemap;Ch2",
            "    add_weather;sunset",
            "    show_layer;Boxes",
            "    move_cursor;0, 13;immediate",
            "    transition;open;500",
            "    wait;250",
            "    add_unit;Brassfield;0, 13;fade;push;west",
            "    add_unit;Emberson;0, 12;fade;push;west",
            "    add_unit;Temp_7;0, 11;fade;push;west",
            "    add_unit;Temp_8;0, 13;fade;push;west",
            "    move_unit;Brassfield;6, 13;normal;push;no_block;no_follow",
            "    move_unit;Emberson;6, 12;normal;push;no_block;no_follow",
            "    move_unit;Temp_7;4, 11;normal;push;no_block;no_follow",
            "    move_unit;Temp_8;5, 12;normal;push;no_follow",
            "    wait;500",
            "    multi_add_portrait;Brassfield;Left;Emberson;Right",
            "    # Brief convo btween Ch 2 and Ch 3 bosses",
            "    s;Emberson;Houses such as these, all dried and sunbaked wood...{w}{c:expression;Emberson;Smile} They make for such a fine kindling, don't you agree, Brassfield?",
            "    s;Brassfield;I don't see the point.{w}{clear}What use is taking the town if you're just gonna burn it down anyway?",
            "    s;Emberson;Always with the bleeding heart, you.{w} {c:expression;Emberson;NoSmile}Gonna try to stop me?",
            "    expression;Brassfield;CloseEyes",
            "    s;Brassfield;...{w} Do as you will.",
            "    expression;Emberson;Smile",
            "    s;Emberson;Hehehaha!{w} Gladly, gladly!{w}{clear}After all, we've all got our parts to play.{w}{clear}Mine is simply the most...{w} exquisite.",
            "    expression;Brassfield;OpenEyes",
            "    s;Brassfield;That's one word for it...",
            "    multi_remove_portrait;Brassfield;Emberson",
            "    transition;close;500",
            "    remove_all_units",
            "    end_skip",
            "    # Residential District",
            "    change_tilemap;Ch1",
            "    add_weather;sunset",
            "    move_cursor;10, 0;immediate",
            "    transition;open;500",
            "    add_unit;Temp_9;6, 0;fade;push;west",
            "    add_unit;Ackerman;7, 0;fade;push;west",
            "    add_unit;Temp_11;8, 0;fade;push;west",
            "    add_unit;Temp_12;9, 0;fade;push;west",
            "    move_unit;Temp_9;6, 2;normal;push;no_block;no_follow",
            "    move_unit;Ackerman;8, 2;normal;push;no_block;no_follow",
            "    move_unit;Temp_11;7, 3;normal;push;no_block;no_follow",
            "    move_unit;Temp_12;9, 3;normal;push;no_follow",
            "    wait;500",
            "    multi_add_portrait;Ackerman;Right;SoldierPurple;Left",
            "    # Ch 1 boss talks to his mooks, ransack n whatnot",
            "    s;Ackerman;Alright,{c:expression;Ackerman;Smile} ye lugheads!{w} Grab everything that ain't nailed down,{w} and give the rest a good pull, just in case!{w} If ye find that lance, bring it here!{w} N' do the same fer any wine, for good measure!",
            "    s;SoldierPurple;Sir, what should we do with the townsfolk?",
            "    s;Ackerman;Eh?{w} Oh, them?{w} Who cares?{w} Hack 'em up, if you like -{w} make a game of it!{w} Don't matter much to me, long as ye do yer jobs!",
            "    s;SoldierPurple;Aye, sir!",
            "    multi_remove_portrait;Ackerman;SoldierPurple",
            "    wait;250",
            "    move_unit;Ackerman;13, 11;normal;push;no_block;no_follow",
            "    move_unit;Temp_11;10, 10;normal;push;no_block;no_follow",
            "    move_unit;Temp_12;16, 5;normal;push;no_block;no_follow",
            "    move_unit;Temp_9;2, 1;normal;push",
            "    wait;250",
            "    flicker_cursor;2, 1",
            "    remove_unit;Temp_9;immediate",
            "    wait;250",
            "    transition;close;500",
            "    remove_all_units",
            "    end_skip",
            "    # School",
            "    change_tilemap;School",
            "    add_weather;sunset",
            "    show_layer;Mid",
            "    add_unit;Elwynn;10, 1;immediate",
            "    add_unit;Alpin;11, 3;immediate",
            "    add_unit;Carlin;12, 4;immediate",
            "    add_unit;Shayla;10, 4;immediate",
            "    add_unit;Raelin;9, 3;immediate",
            "    add_unit;Kid_5;8, 4;immediate",
            "    music;Last Laughs",
            "    transition;open;500",
            "    multi_add_portrait;Elwynn;Right;Alpin;FarLeft;Boy;MidLeft",
            "    # Back at the school we're finally at combat training so the kids have their weapons",
            "    # Enemy soldier shows up and murders the dumb kid named [whatever] who forgot to bring his weapon",
            "    # The 4 remaining students and their teacher leave the school and see their town is being raided",
            "    s;Elwynn;Phew...{w} Can't believe you lot're still going!{w} Don't you ever get tired?",
            "    s;Alpin;Sure we do, teach, but that's the fun part!",
            "    s;Elwynn;Eh, kids...{w} Conall, c'mere.",
            "    s;Boy;Y-yes, teach?",
            "    s;Elwynn;Since you went and forgot your damn weapon,{w} why don't you make yourself useful and draw some water for us, eh?{w} We're gonna need something to whet our thirst.",
            "    bop_portrait;Boy",
            "    s;Boy;Sure!{w} But, umm...{w} wouldn't you prefer something from the tavern, inste-?",
            "    s;Elwynn;I said water, didn't I!?{w} So go get some damned water!",
            "    bop_portrait;Boy",
            "    s;Boy;R-right!{w} Sorry!",
            "    multi_remove_portrait;Alpin;Boy",
            "    move_unit;Kid_5;7,9;normal;stack;60;no_follow",
            "    remove_unit;Kid_5;fade;south",
            "    wait;250",
            "    multi_add_portrait;Shayla;FarLeft;Carlin;MidLeft",
            "    s;Elwynn;Damned brat...{w} Hey, Shayla, cut that out, will ya?{w} You'll break a bone, swinging like that!",
            "    s;Shayla;Yeah, yeah, whatever.{w} Maybe a broken bone would do this guy some good.",
            "    bop_portrait;Carlin",
            "    s;Carlin;In what world would that ever be a good thing!?",
            "    expression;Shayla;Smile",
            "    s;Shayla;Hehe!{w} Mine, obviously!{w} Now, come on! Raise your sword, so I can-",
            "    multi_remove_portrait;Shayla;Elwynn;Carlin",
            "    wait;250",
            "    music;Hulking Step of the Empire",
            "    add_unit;Kid_5;7,9;fade;push;south",
            "    move_unit;Kid_5;8,4;normal;push;60",
            "    multi_add_portrait;Boy;Left;Elwynn;Right",
            "    s;Boy;Raid!{w} Raid!{w} It's a raid!",
            "    bop_portrait;Elwynn",
            "    s;Elwynn;Eh!?{w} What's the matter with you-?",
            "    s;Boy;Th-there's soldiers!{w} They're-!",
            "    multi_remove_portrait;Boy;Elwynn",
            "    add_unit;Temp_9;7, 9;fade;push;south",
            "    move_unit;Temp_9;7, 4;normal;push;120",
            "    interact_unit;Temp_9;Kid_5;crit1,end;Junk10;force_no_animation",
            "    add_portrait;SoldierPurple;Left",
            "    speak;SoldierPurple;Damned kid!{w} Shows you for blowing our cover!",
            "    multi_add_portrait;Raelin;MidRight;Elwynn;FarRight",
            "    s;Raelin;Goddess, no!!",
            "    s;SoldierPurple;What's this, then?{w} A whole litter of brats, huh?{w} Guess I'll have to shut you all up.",
            "    s;Elwynn;Y-you-!{w} Coward!{w} Killing a...{w} a child from behind like that!",
            "    s;SoldierPurple;Oh, don't worry.{w} I'll be sure to look the rest in the eye.",
            "    remove_portrait;Raelin",
            "    add_portrait;Alpin;MidRight",
            "    s;Alpin;Stay the hell away from us!{w} I'll kill you!",
            "    s;Elwynn;Alpin!{w} Wait!",
            "    multi_remove_portrait;Alpin;Elwynn;SoldierPurple",
            "    wait;250",
            "    move_unit;Alpin;8, 4;normal;push;60",
            "    interact_unit;Alpin;Temp_9;crit1,end;Junk8;force_no_animation",
            "    add_portrait;Alpin;Right",
            "    expression;Alpin;HalfCloseEyes",
            "    speak;Alpin;Huff...{w} huff...",
            "    move_portrait;Alpin;FarLeft",
            "    mirror_portrait;Alpin",
            "    expression;Alpin;OpenEyes",
            "    multi_add_portrait;Elwynn;FarRight;Shayla;MidLeft;Carlin;MidRight",
            "    expression;Shayla;HalfCloseEyes",
            "    s;Shayla;Oh crap...{w} h-he just...{w} Conall is...",
            "    s;Elwynn;...{w} Then the town's...{w} under attack?{w} I don't understand...",
            "    s;Alpin;Teach...{w} teach, what do we do now?",
            "    s;Elwynn;What do we...{w} what do we do?",
            "    s;Carlin;He said there was a raid...{w} does that mean everyone's in danger!?",
            "    s;Alpin;D'you think...{w} what if my family's...?",
            "    s;Elwynn;No, lad, no. None of that, alright?{w} Just...{w} just let me think...",
            "    remove_portrait;Carlin",
            "    add_portrait;Raelin;MidRight",
            "    bop_portrait;Raelin",
            "    s;Raelin;Are we going to die?{w} Oh goddess, are we going to-",
            "    s;Elwynn;I said let me think!",
            "    wait;500",
            "    s;Elwynn;Elspeth...{w} Elspeth's in the church.{w} She'll know what to do.",
            "    s;Alpin;The church...{w} with the lance, right!?{w} Maybe we could use it!",
            "    s;Elwynn;Alright.{w} Okay, yeah, alright, there's an idea.{w} We get to the church, and then...{w} then, we figure something out.{w} All of you, follow me.",
            "    s;Shayla;But what about Conall?{w} What do we with...{w} with the b-body?",
            "    s;Elwynn;...{w} Goddess above, forgive me...{w} We leave him.{w} Come, with me.{w} We don't have much time.",
            "    multi_remove_portrait;Shayla;Raelin;Elwynn;Alpin",
            "    wait;250",
            "    move_unit;Alpin;7, 9;normal;stack;no_block",
            "    move_unit;Carlin;7, 9;normal;stack;no_block",
            "    move_unit;Shayla;7, 9;normal;stack;no_block",
            "    move_unit;Raelin;7, 9;normal;stack;no_block",
            "    move_unit;Elwynn;7, 9;normal;stack",
            "    remove_unit;Alpin;fade;south",
            "    remove_unit;Carlin;fade;south",
            "    remove_unit;Shayla;fade;south",
            "    remove_unit;Raelin;fade;south",
            "    remove_unit;Elwynn;fade;south",
            "    transition;close;250",
            "    remove_all_units",
            "    end_skip",
            "    # School",
            "    change_tilemap;Ch1",
            "    add_weather;sunset",
            "    add_group;Enemy1;Enemy1;immediate",
            "    # Add enemies",
            "    transition;open;250",
            "    add_unit;Elwynn;2, 1;fade;stack;north",
            "    add_unit;Alpin;2, 1;fade;stack;north",
            "    add_unit;Carlin;2, 1;fade;stack;north",
            "    add_unit;Shayla;2, 1;fade;stack;north",
            "    add_unit;Raelin;2, 1;fade;stack;north",
            "    sound;Unlock",
            "    show_layer;TopLeft",
            "    move_unit;Alpin;3, 3;normal;push;no_block",
            "    move_unit;Carlin;1, 3;normal;push;no_block",
            "    move_unit;Shayla;2, 4;normal;push;no_block",
            "    move_unit;Raelin;4, 2;normal;push;no_block",
            "    move_unit;Elwynn;2, 2;normal;push",
            "    multi_add_portrait;Alpin;MidLeft;Elwynn;MidRight;Shayla;FarLeft;Carlin;FarRight",
            "    # Hero Time :Sunglasses:",
            "    # And by that I mean the gang needs to GTFO.",
            "    # Shayla, Carlin, and Raelin mention they live close to the school.",
            "    s;Elwynn;They're already swarming the place...{w}faithless bastards, they are.",
            "    s;Alpin;We have to stop them!{w} Or more people could get hurt!",
            "    s;Elwynn;No, lad, we need to leave.|Training or no, you're just children.{w} I told my sister I'd keep you safe, and I meant it.{w} No heroics{semicolon}{w} fight like I taught you, and stay alive.{w} That's all that matters.",
            "    s;Shayla;We should check on our families, too!{w} Most of us live close by!",
            "    s;Elwynn;Aye, good idea, but if push comes to shove...{w} you run for it, alright?",
            "    s;Carlin;I just hope everyone's alright...",
            "    s;Elwynn;...{w} Set your expectations low, lad.{w} The night's only just begun.",
            "    multi_remove_portrait;Alpin;Elwynn;Shayla;Carlin",
            "    change_team;Alpin;player",
            "    change_team;Carlin;player",
            "    change_team;Shayla;player",
            "    change_team;Raelin;player",
            "    change_team;Elwynn;player",
            "end",
            "add_region;House1;5, 8;1, 1;event;<yellow>Visit</yellow>;only_once",
            "add_region;House2;9, 8;1, 1;event;<yellow>Visit</yellow>;only_once",
            "add_region;House3;14, 4;1, 1;event;<yellow>Visit</yellow>;only_once",
            "add_region;Escape;13, 11;4, 1;event;Escape",
            "add_region;Formation1;3, 3;1,1;formation",
            "add_region;Formation2;1, 3;1,1;formation",
            "add_region;Formation3;2, 4;1,1;formation",
            "add_region;Formation4;4, 2;1,1;formation",
            "add_region;Formation5;2, 2;1,1;formation",
            "if;game.mode.nid == 'Lunatic'",
            "    enable_convoy;f",
            "else",
            "    enable_convoy;t",
            "end",
            "game_var;_supports;True",
            "change_ai;Ackerman;AttackNoMove",
            "give_item;Ackerman;AngelFeather;no_banner;droppable",
            "",
            "game_var;AckermanDead;0",
            "level_var;AckermanElwynn;0",
            "level_var;AckermanOther;0",
            "game_var;YouSupported;0",
            "game_var;InstructionsUnclear;0",
            "game_var;NoDeaths;0",
            "game_var;LieutenantInChapter;0",
            "game_var;LieutenantInEndgame;0",
            "game_var;PrfAcquired;0",
            "level_var;BossMusic;0",
            "",
            "add_lore;WeaponTriangle",
            "add_lore;Stats",
            "add_lore;Equations",
            "add_lore;Convoy",
            "",
            "if;RECORDS.get(\"WeaponRanks\")",
            "    add_lore;WeaponRanks",
            "end",
            "",
            "if;RECORDS.get(\"FreeActions\")",
            "    add_lore;FreeActions",
            "end",
            "",
            "if;RECORDS.get(\"StatColors\")",
            "    add_lore;StatColors",
            "end",
            "",
            "if;RECORDS.get(\"Supports\")",
            "    add_lore;BuildingSupports",
            "    add_lore;SupportBonuses",
            "end",
            "",
            "if;RECORDS.get(\"Visiting\")",
            "    add_lore;Visiting",
            "end",
            "",
            "if;RECORDS.get(\"Thieves\")",
            "    add_lore;Thieves",
            "end",
            "",
            "set_custom_options;Codex,Achievements;true,true;Open the Codex.,Check Achievements.;Menu_Codex,CallAchievements",
            "",
            "if;RECORDS.get(\"NormalCleared\")",
            "    set_custom_options;Codex,Achievements,Jukebox;true,true,true;Open the Codex.,Check Achievements.,Change the tunes!;Menu_Codex,CallAchievements,Jukebox",
            "end",
            "",
            "",
            "if;RECORDS.get(\"Ch1Hard\")",
            "    add_lore;DiffGeneral",
            "    add_lore;Ch1",
            "end",
            "",
            "if;RECORDS.get(\"Ch2Hard\")",
            "    add_lore;Ch2",
            "end",
            "",
            "if;RECORDS.get(\"Ch3Hard\")",
            "    add_lore;Ch3",
            "end",
            "",
            "if;RECORDS.get(\"Ch4Hard\")",
            "    add_lore;Ch4",
            "end",
            "",
            "if;RECORDS.get(\"Ch5Hard\")",
            "    add_lore;Ch5",
            "end",
            "",
            "if;RECORDS.get(\"ThrallVisit\")",
            "    add_lore;ThrallVisits",
            "end",
            "",
            "if;RECORDS.get(\"BonusModes\")",
            "    add_lore;BonusModes",
            "    add_lore;WeaponReversal",
            "    add_lore;DoubleReversal",
            "    add_lore;ReverseRecruitment",
            "end",
            "",
            "if;RECORDS.get(\"TraineeUpgrades\")",
            "    add_lore;TraineeUpgrades",
            "end",
            "",
            "if;RECORDS.get(\"AlpinUpgrade\")",
            "    add_lore;Alpin",
            "end",
            "",
            "if;RECORDS.get(\"ShaylaUpgrade\")",
            "    add_lore;Shayla",
            "end",
            "",
            "if;RECORDS.get(\"CarlinUpgrade\")",
            "    add_lore;Carlin",
            "end",
            "",
            "if;RECORDS.get(\"RaelinUpgrade\")",
            "    add_lore;Raelin",
            "end",
            "",
            "if;game.mode.nid != 'Normal'",
            "    change_objective_win;Escape With All,Within 8 Turns",
            "    change_objective_simple;Escape With All,Turns Left {eval:9-game.turncount}",
            "    change_stats;Ackerman;STR,1,SKL,1,DEF,1,RES,1;immediate",
            "end",
            "if;'{v:EnemyReverse}' == 'Reversal'",
            "    trigger_script;Global GenericsWR",
            "elif;'{v:EnemyReverse}' == 'Double'",
            "    trigger_script;Global GenericsDR",
            "end",
            "",
            "if;game.mode.nid == 'Lunatic'",
            "    trigger_script;0 LunaticInventories",
            "end",
            "",
            "if;'{v:ReverseRecruitment}' == 'Yes'",
            "    show_layer;BotLeftRR;immediate",
            "    show_layer;BotRightRR;immediate",
            "    show_layer;TopRightRR;immediate",
            "end",
            "",
            "game_var;ResAlpin;0",
            "game_var;ResCarlin;0",
            "game_var;ResRaelin;0",
            "game_var;ResShayla;0",
            "game_var;ResElwynn;0",
            "game_var;ResSaraid;0",
            "game_var;ResQuinley;0",
            "game_var;ResElspeth;0",
            "game_var;ResLamonte;0",
            "game_var;ResGarvey;0",
            "game_var;ResCorridon;0",
            "game_var;ResAilsa;0",
            "game_var;ResOrla;0",
            "game_var;ResLaisren;0",
            "game_var;ResShallcross;0",
            "game_var;ResKeeva;0",
            "",
            "game_var;Ch5Outro;0",
            "",
            "",
            "if;'{v:Jukebox}' == 'I Wanna Rock!'",
            "    change_music;player_phase;Onward",
            "    change_music;enemy_phase;Onward",
            "    change_music;enemy2_phase;Onward",
            "    change_music;other_phase;Onward",
            "    prep;1;Prep Jam;Codex,Achievements;true,true;Menu_Codex,CallAchievements",
            "elif;'{v:Jukebox}' == 'Play Some Grooves!'",
            "    ",
            "    change_music;player_phase;Battlefield Blues",
            "    change_music;enemy_phase;Battlefield Blues",
            "    change_music;enemy2_phase;Battlefield Blues",
            "    change_music;other_phase;Battlefield Blues",
            "    prep;1;TPWD;Codex,Achievements;true,true;Menu_Codex,CallAchievements",
            "else",
            "    ",
            "    change_music;player_phase;Rise To The Threat",
            "    change_music;enemy_phase;Rise To The Threat",
            "    change_music;enemy2_phase;Rise To The Threat",
            "    change_music;other_phase;Rise To The Threat",
            "    prep;1;Before An Impossible Battlefield;Codex,Achievements;true,true;Menu_Codex,CallAchievements",
            "end"
        ]
    }
]